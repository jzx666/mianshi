//综合题 - 虚拟DOM diff算法简答
//请简要描述虚拟DOM diff算法的基本原理，并回答：

//diff算法的复杂度如何？React做了哪些优化？

//什么是key属性？为什么在列表渲染中需要使用key？

//请描述React的diff策略（比较规则）

//答案：
// 一、虚拟DOM diff算法的基本原理
// 虚拟DOM diff算法（也称为协调算法，Reconciliation）是React等现代前端框架的核心机制，用于比较新旧虚拟DOM树的差异，并计算出需要更新的最小操作集合，从而高效地更新真实DOM。

// 核心流程：
// text
// 1. 状态变化 → 生成新的虚拟DOM树
// 2. 对比新旧虚拟DOM树（diff算法）
// 3. 计算最小差异（patch）
// 4. 批量更新真实DOM

//1. diff算法的复杂度如何？React做了哪些优化？
//传统diff算法的复杂度：
//比较两棵树的差异，最直接的算法复杂度是 O(n³)（n是节点数）
//原因：需要比较每个节点与另一棵树的所有节点

//React的优化策略（将复杂度降为O(n)）：
//(1) 树diff的优化策略：
// React遵循的三个假设：
// 1. 不同类型的元素会产生不同的树
// 2. 开发者可以通过key属性标识哪些子元素是稳定的
// 3. 只比较同一层次的节点，不跨层级比较

//(2) 具体优化手段：
//层级比较：只比较同一层级的节点，不跨层级比较
// 旧树              // 新树
//A                  A
//├─ B               ├─ B
//└─ C               └─ D
//      ↓
//// 只比较A层、B/C层、D层，不跨层比较

//类型比较：不同类型的组件直接重建
// 旧: <div>...</div>
// 新: <span>...</span>
// 直接删除div及其子节点，创建span及其子节点

//列表比较（key优化）：使用key标识元素，减少不必要的重渲染
// 没有key：重新创建所有元素
// 有key：识别哪些元素可以复用